<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="1531px" height="4356px" viewBox="-0.5 -0.5 1531 4356" content="&lt;mxfile host=&quot;Electron&quot; modified=&quot;2022-05-23T07:10:38.242Z&quot; agent=&quot;5.0 (Macintosh; Intel Mac OS X 12_3_1) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/14.4.3 Chrome/87.0.4280.141 Electron/11.3.0 Safari/537.36&quot; etag=&quot;Dz4m6-a_cl33VRfzhUjg&quot; version=&quot;14.4.3&quot; type=&quot;device&quot;&gt;&lt;diagram id=&quot;4aRmwtn3LgudHCLCKFT1&quot; name=&quot;Page-1&quot;&gt;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&lt;/diagram&gt;&lt;/mxfile&gt;"><defs/><g><path d="M 349.5 190 L 349.5 203.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 208.88 L 346 201.88 L 349.5 203.63 L 353 201.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 349.5 190 L 349.5 210 L 349.5 190 L 349.5 203.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 208.88 L 346 201.88 L 349.5 203.63 L 353 201.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="282" y="130" width="135" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 133px; height: 1px; padding-top: 160px; margin-left: 283px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="color: rgb(0 , 0 , 0) ; font-family: &quot;helvetica&quot; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none">请求订单确认页的数据，入参为地址id<br /></span></div></div></div></foreignObject><text x="350" y="164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">请求订单确认页的数据，入参为地址id&#xa;</text></switch></g><path d="M 227 0 L 222 0 Q 217 0 217 10 L 217 355 Q 217 365 212 365 L 209.5 365 Q 207 365 212 365 L 214.5 365 Q 217 365 217 375 L 217 720 Q 217 730 222 730 L 227 730" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="67" y="335" width="135" height="60" fill="#d5e8d4" stroke="#82b366" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 133px; height: 1px; padding-top: 365px; margin-left: 68px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">生成订单确认页的信息</div></div></div></foreignObject><text x="135" y="369" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">生成订单确认页的信息</text></switch></g><path d="M 349.5 110 L 349.5 123.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 128.88 L 346 121.88 L 349.5 123.63 L 353 121.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="277" y="50" width="145" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 143px; height: 1px; padding-top: 80px; margin-left: 278px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="color: rgb(0 , 0 , 0) ; font-family: &quot;helvetica&quot; ; font-size: 12px ; font-style: normal ; font-weight: 400 ; letter-spacing: normal ; text-align: center ; text-indent: 0px ; text-transform: none ; word-spacing: 0px ; background-color: rgb(248 , 249 , 250) ; display: inline ; float: none">购物车页点击「去结算」<br /></span></div></div></div></foreignObject><text x="350" y="84" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">购物车页点击「去结算」&#xa;</text></switch></g><path d="M 432 250 L 500.63 250" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 505.88 250 L 498.88 253.5 L 500.63 250 L 498.88 246.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 250px; margin-left: 470px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="470" y="253" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 349.5 290 L 349.5 343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 348.88 L 346 341.88 L 349.5 343.63 L 353 341.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 320px; margin-left: 350px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="350" y="323" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 349.5 210 L 432 250 L 349.5 290 L 267 250 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 250px; margin-left: 268px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span style="font-family: &quot;helvetica&quot;">拦截器从session获取登陆用户<br />判断是否登陆<br /></span></div></div></div></foreignObject><text x="350" y="254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">拦截器从session获取登陆用户...</text></switch></g><rect x="507" y="220" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 250px; margin-left: 508px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">跳转去登陆页</div></div></div></foreignObject><text x="567" y="254" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">跳转去登陆页</text></switch></g><path d="M 409.5 380 L 503.13 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 508.38 380 L 501.38 383.5 L 503.13 380 L 501.38 376.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 409.5 380 L 459.5 380 L 459.5 530.5 L 503.13 530.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 508.38 530.5 L 501.38 534 L 503.13 530.5 L 501.38 527 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 409.5 380 L 459.5 380 L 459.5 700 L 503.13 700" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 508.38 700 L 501.38 703.5 L 503.13 700 L 501.38 696.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 349.5 410 L 349.5 433.13" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 438.38 L 346 431.38 L 349.5 433.13 L 353 431.38 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="289.5" y="350" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 380px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">准备RPC获取订单确认页需要的数据</div></div></div></foreignObject><text x="350" y="384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">准备RPC获取订单确认页需要的数据</text></switch></g><path d="M 639.5 380 L 660.66 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 665.91 380 L 658.91 383.5 L 660.66 380 L 658.91 376.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="509.5" y="350" width="130" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 380px; margin-left: 511px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取当前登录用户的全部地址列表用户选择</div></div></div></foreignObject><text x="575" y="384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取当前登录用户的全部地址列表用户选择</text></switch></g><path d="M 817.03 380 L 843.13 380" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 848.38 380 L 841.38 383.5 L 843.13 380 L 841.38 376.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="667.03" y="350" width="150" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 148px; height: 1px; padding-top: 380px; margin-left: 668px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据地址id，设置选中的收货地址，如果没有地址id，就设置为默认地址</div></div></div></foreignObject><text x="742" y="384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据地址id，设置选中的收货地址，如果没有地址id，就设置为默认地址</text></switch></g><rect x="849.5" y="350" width="130" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 128px; height: 1px; padding-top: 380px; margin-left: 851px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据选中的地址计算获取运费</div></div></div></foreignObject><text x="915" y="384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据选中的地址计算获取运费</text></switch></g><path d="M 517 310 L 627 310 L 627 310 L 637 325 L 627 340 L 627 340 L 517 340 L 527 325 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 325px; margin-left: 577px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">会员服务</div></div></div></foreignObject><text x="577" y="329" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">会员服务</text></switch></g><path d="M 857 310 L 957 310 L 957 310 L 967 325 L 957 340 L 957 340 L 857 340 L 867 325 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 325px; margin-left: 912px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">库存服务</div></div></div></foreignObject><text x="912" y="329" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存服务</text></switch></g><path d="M 629.5 530.5 L 675.66 530.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 680.91 530.5 L 673.91 534 L 675.66 530.5 L 673.91 527 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="509.5" y="500.5" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 531px; margin-left: 511px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">从redis里获取当前登录用户的购物项列表</div></div></div></foreignObject><text x="570" y="534" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">从redis里获取当前登录用户的购物项列表</text></switch></g><path d="M 517 460 L 617 460 L 617 460 L 627 475 L 617 490 L 617 490 L 517 490 L 527 475 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 475px; margin-left: 572px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">购物车服务</div></div></div></foreignObject><text x="572" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">购物车服务</text></switch></g><path d="M 802.03 530.5 L 843.13 530.5" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 848.38 530.5 L 841.38 534 L 843.13 530.5 L 841.38 527 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="682.03" y="500.5" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 531px; margin-left: 683px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">更新每个购物项的最新价格</div></div></div></foreignObject><text x="742" y="534" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">更新每个购物项的最新价格</text></switch></g><rect x="849.5" y="500.5" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 531px; margin-left: 851px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">更新每个购物项的库存情况</div></div></div></foreignObject><text x="910" y="534" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">更新每个购物项的库存情况</text></switch></g><path d="M 857 460 L 957 460 L 957 460 L 967 475 L 957 490 L 957 490 L 857 490 L 867 475 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 475px; margin-left: 912px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">库存服务</div></div></div></foreignObject><text x="912" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存服务</text></switch></g><path d="M 687 460 L 792.03 460 L 792.03 460 L 802.03 475 L 792.03 490 L 792.03 490 L 687 490 L 697 475 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 475px; margin-left: 745px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">商品服务</div></div></div></foreignObject><text x="745" y="479" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">商品服务</text></switch></g><rect x="474.5" y="570" width="190" height="20" fill="none" stroke="none" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 580px; margin-left: 570px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">key为<span style="background-color: rgb(255 , 255 , 255) ; font-size: 9.8pt">"eshopblvd:cart:"+userId</span></div></div></div></foreignObject><text x="570" y="584" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">key为"eshopblvd:cart:"+userId</text></switch></g><rect x="509.5" y="670" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 700px; margin-left: 511px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取优惠券、积分等信息</div></div></div></foreignObject><text x="570" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取优惠券、积分等信息</text></switch></g><path d="M 517 630 L 617 630 L 617 630 L 627 645 L 617 660 L 617 660 L 517 660 L 527 645 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 645px; margin-left: 572px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">优惠券服务</div></div></div></foreignObject><text x="572" y="649" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">优惠券服务</text></switch></g><path d="M 349.5 509.5 L 349.5 533.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 538.88 L 346 531.88 L 349.5 533.63 L 353 531.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="280.75" y="439.5" width="137.5" height="70" rx="10.5" ry="10.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 475px; margin-left: 282px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">自动计算商品sku数量、订单项总计价格、应付金额(减去积分、加上运费)</div></div></div></foreignObject><text x="350" y="478" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">自动计算商品sku数量、订单项总计价格、应付金额(减去积分、加上运费)</text></switch></g><path d="M 349.5 630 L 349.5 663.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 668.88 L 346 661.88 L 349.5 663.63 L 353 661.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="254.5" y="540" width="190" height="90" rx="13.5" ry="13.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 585px; margin-left: 256px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">创建一个防重令牌<br />防止重复订单提交，预先生成令牌<br />存入redis<br />key为<span style="background-color: rgb(255 , 255 , 255) ; font-size: 9.8pt">"order:token:"+用户id<br />value为随机值<br /></span></div></div></div></foreignObject><text x="350" y="589" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">创建一个防重令牌防止重复订单提交，预先生成令牌存入redis...</text></switch></g><rect x="289.5" y="670" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 700px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">返回这些数据等<br />渲染订单确认页</div></div></div></foreignObject><text x="350" y="704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">返回这些数据等&#xa;渲染订单确认页</text></switch></g><path d="M 349.5 860 L 349.5 873.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 878.88 L 346 871.88 L 349.5 873.63 L 353 871.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="289.5" y="800" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 830px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单确认页点击<br />「提交订单」</div></div></div></foreignObject><text x="350" y="834" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单确认页点击&#xa;「提交订单」</text></switch></g><path d="M 399.5 1040 L 438.13 1040" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 443.38 1040 L 436.38 1043.5 L 438.13 1040 L 436.38 1036.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1040px; margin-left: 423px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="423" y="1043" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 349.5 1080 L 349.5 1113.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 1118.88 L 346 1111.88 L 349.5 1113.63 L 353 1111.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1100px; margin-left: 349px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="349" y="1103" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 349.5 1000 L 399.5 1040 L 349.5 1080 L 299.5 1040 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 98px; height: 1px; padding-top: 1040px; margin-left: 301px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">校验订单确认页带的防重令牌</div></div></div></foreignObject><text x="350" y="1044" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">校验订单确认页带的防重令牌</text></switch></g><path d="M 349.5 980 L 349.5 993.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.5 998.88 L 346 991.88 L 349.5 993.63 L 353 991.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="290.75" y="880" width="117.5" height="100" rx="15" ry="15" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 116px; height: 1px; padding-top: 930px; margin-left: 292px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">提交数据包括了<br />收货地址id<br />支付方式<br />应付价格<br />订单备注<br />防重令牌</div></div></div></foreignObject><text x="350" y="934" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">提交数据包括了收货地址id...</text></switch></g><path d="M 409.75 1273 L 439.8 1273 L 439.8 1203 L 463.38 1203" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.63 1203 L 461.63 1206.5 L 463.38 1203 L 461.63 1199.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 409.75 1273 L 439.8 1273 L 439.8 1343 L 463.38 1343" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 468.63 1343 L 461.63 1346.5 L 463.38 1343 L 461.63 1339.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 349.75 1303 L 349.8 1373 L 349.52 1436.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.49 1441.88 L 346.03 1434.87 L 349.52 1436.63 L 353.03 1434.9 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="289.75" y="1243" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1273px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">构建订单数据</div></div></div></foreignObject><text x="350" y="1277" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">构建订单数据</text></switch></g><path d="M 349.49 1170 L 349.5 1206.5 L 349.71 1236.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.74 1241.88 L 346.19 1234.91 L 349.71 1236.63 L 353.19 1234.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="296.37" y="1120" width="106.25" height="50" rx="7.5" ry="7.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 104px; height: 1px; padding-top: 1145px; margin-left: 297px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">删除令牌</div></div></div></foreignObject><text x="349" y="1149" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">删除令牌</text></switch></g><path d="M 112 990 L 277 990 L 277 1070 L 257.5 1070 L 277 1100 L 227.5 1070 L 112 1070 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 163px; height: 1px; padding-top: 1030px; margin-left: 113px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>保证接口幂等性<br />利用redis luna脚本进行令牌验证+删除的原子性操作</span><br /><font style="font-size: 12px"><span>key为</span><span style="color: rgb(0 , 0 , 0) ; font-family: &quot;helvetica neue&quot;">"order:token:"+</span><span class="s1" style="color: rgb(0 , 0 , 0) ; font-stretch: normal ; line-height: normal ; font-family: &quot;pingfang sc&quot;">用户</span><span style="color: rgb(0 , 0 , 0) ; font-family: &quot;helvetica neue&quot;">id value</span><span class="s1" style="color: rgb(0 , 0 , 0) ; font-stretch: normal ; line-height: normal ; font-family: &quot;pingfang sc&quot;">为随机值</span></font></div></div></div></foreignObject><text x="195" y="1034" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">保证接口幂等性利用redis luna脚本进行令牌验证+删除的原子性操作...</text></switch></g><path d="M 299.5 0 L 389.5 0 L 389.5 0 L 399.5 15 L 389.5 30 L 389.5 30 L 299.5 30 L 309.5 15 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 15px; margin-left: 350px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务</div></div></div></foreignObject><text x="350" y="19" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务</text></switch></g><rect x="469.75" y="1163" width="152.5" height="80" rx="12" ry="12" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 151px; height: 1px; padding-top: 1203px; margin-left: 471px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单的基本数据<br />订单号、创建时间、用户id、订单状态（新建）、自动确认时间、订单备注等</div></div></div></foreignObject><text x="546" y="1207" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单的基本数据&#xa;订单号、创建时间、用户id、订单状态（新建）、自动确认时间、订单备注等</text></switch></g><rect x="469.75" y="1313" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1343px; margin-left: 471px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据地址id获取收货地址信息、根据选中收货地址来计算运费</div></div></div></foreignObject><text x="530" y="1347" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据地址id获取收货地址信息、根据选中收货地址来计算运费</text></switch></g><path d="M 479.75 1273 L 569.75 1273 L 569.75 1273 L 579.75 1288 L 569.75 1303 L 569.75 1303 L 479.75 1303 L 489.75 1288 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1288px; margin-left: 530px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">库存服务</div></div></div></foreignObject><text x="530" y="1292" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存服务</text></switch></g><path d="M 299.49 760 L 389.49 760 L 389.49 760 L 399.49 775 L 389.49 790 L 389.49 790 L 299.49 790 L 309.49 775 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 775px; margin-left: 349px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务<br />（本地事务）</div></div></div></foreignObject><text x="349" y="779" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务&#xa;（本地事务）</text></switch></g><path d="M 409.49 1473 L 460.88 1473" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 466.13 1473 L 459.13 1476.5 L 460.88 1473 L 459.13 1469.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 409.49 1473 L 438.4 1473 L 438.4 1593 L 460.88 1593" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 466.13 1593 L 459.13 1596.5 L 460.88 1593 L 459.13 1589.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 409.49 1473 L 438.4 1473 L 438.4 1710 L 460.88 1710" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 466.13 1710 L 459.13 1713.5 L 460.88 1710 L 459.13 1706.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 349.49 1503 L 349.49 1628.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.49 1633.88 L 345.99 1626.88 L 349.49 1628.63 L 352.99 1626.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="289.49" y="1443" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1473px; margin-left: 290px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">构建订单项数据</div></div></div></foreignObject><text x="349" y="1477" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">构建订单项数据</text></switch></g><path d="M 587.25 1473 L 640.88 1473" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 646.13 1473 L 639.13 1476.5 L 640.88 1473 L 639.13 1469.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="467.25" y="1443" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1473px; margin-left: 468px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取当前用户购物车中的购物项列表<br />封装成订单项列表</div></div></div></foreignObject><text x="527" y="1477" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取当前用户购物车中的购物项列表&#xa;封装成订单项列表</text></switch></g><rect x="647.25" y="1443" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1473px; margin-left: 648px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">每个购物项都更新了最新的价格和库存</div></div></div></foreignObject><text x="707" y="1477" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">每个购物项都更新了最新的价格和库存</text></switch></g><path d="M 657.25 1403 L 747.25 1403 L 747.25 1403 L 757.25 1418 L 747.25 1433 L 747.25 1433 L 657.25 1433 L 667.25 1418 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1418px; margin-left: 707px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">库存服务</div></div></div></foreignObject><text x="707" y="1422" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存服务</text></switch></g><path d="M 657.25 1363 L 747.25 1363 L 747.25 1363 L 757.25 1378 L 747.25 1393 L 747.25 1393 L 657.25 1393 L 667.25 1378 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1378px; margin-left: 707px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">商品服务</div></div></div></foreignObject><text x="707" y="1382" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">商品服务</text></switch></g><rect x="467.25" y="1563" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1593px; margin-left: 468px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">获取每个订单项sku的spu信息</div></div></div></foreignObject><text x="527" y="1597" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">获取每个订单项sku的spu信息</text></switch></g><path d="M 477.25 1403 L 567.25 1403 L 567.25 1403 L 577.25 1418 L 567.25 1433 L 567.25 1433 L 477.25 1433 L 487.25 1418 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1418px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">购物车服务</div></div></div></foreignObject><text x="527" y="1422" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">购物车服务</text></switch></g><path d="M 477.25 1523 L 567.25 1523 L 567.25 1523 L 577.25 1538 L 567.25 1553 L 567.25 1553 L 477.25 1553 L 487.25 1538 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1538px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">商品服务</div></div></div></foreignObject><text x="527" y="1542" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">商品服务</text></switch></g><rect x="467.25" y="1680" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1710px; margin-left: 468px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">每个订单项减去促销、优惠、积分后计算得到实际金额</div></div></div></foreignObject><text x="527" y="1714" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">每个订单项减去促销、优惠、积分后计算得到实际金额</text></switch></g><path d="M 349.49 1705 L 349.49 1743.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 349.49 1748.88 L 345.99 1741.88 L 349.49 1743.63 L 352.99 1741.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="275.74" y="1635" width="147.5" height="70" rx="10.5" ry="10.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 146px; height: 1px; padding-top: 1670px; margin-left: 277px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">减去每个订单项促销、优惠、积分信息，加上运费<br />得到最后整个订单应付价格</div></div></div></foreignObject><text x="349" y="1674" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">减去每个订单项促销、优惠、积分信息，加上运费&#xa;得到最后整个订单应付价格</text></switch></g><path d="M 438.24 1795 L 481.01 1795" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 486.26 1795 L 479.26 1798.5 L 481.01 1795 L 479.26 1791.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1796px; margin-left: 455px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="455" y="1799" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 349.49 1840 L 348.3 1840 L 348.26 1863.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.25 1868.88 L 344.76 1861.88 L 348.26 1863.63 L 351.76 1861.89 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 349.49 1750 L 438.24 1795 L 349.49 1840 L 260.74 1795 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 176px; height: 1px; padding-top: 1795px; margin-left: 262px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">验价<br />计算得到最新的应付价格和提交订单的应付价格差值小于0.01</div></div></div></foreignObject><text x="349" y="1799" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">验价&#xa;计算得到最新的应付价格和提交订单的应付价格差值小于0.01</text></switch></g><path d="M 348.25 1950 L 348.25 2013.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.25 2018.88 L 344.75 2011.88 L 348.25 2013.63 L 351.75 2011.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="289.5" y="1870" width="117.5" height="80" rx="12" ry="12" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 116px; height: 1px; padding-top: 1910px; margin-left: 291px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><p class="p1" style="margin: 0px ; font-stretch: normal ; line-height: normal"><font style="font-size: 12px">将订单和订单项数据保存数据库<br />「oms_order」<br />「oms_order_item」<br /></font></p></div></div></div></foreignObject><text x="348" y="1914" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">将订单和订单项数据保存数据库「oms_order」...</text></switch></g><path d="M 408.25 2050 L 473.51 2050" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 478.76 2050 L 471.76 2053.5 L 473.51 2050 L 471.76 2046.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 348.25 2080 L 348.3 2100 L 348.43 2113.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.48 2118.88 L 344.92 2111.92 L 348.43 2113.63 L 351.92 2111.85 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.25" y="2020" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2050px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">锁库存</div></div></div></foreignObject><text x="348" y="2054" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">锁库存</text></switch></g><rect x="609.37" y="1010" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1040px; margin-left: 610px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">重定向到订单确认页</div></div></div></foreignObject><text x="669" y="1044" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">重定向到订单确认页</text></switch></g><path d="M 564.5 1040 L 603 1040" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 608.25 1040 L 601.25 1043.5 L 603 1040 L 601.25 1036.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="444.5" y="1010" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 1040px; margin-left: 446px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">令牌验证失败，抛异常，本地事务回滚</div></div></div></foreignObject><text x="505" y="1044" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">令牌验证失败，抛异常，本地事务回滚</text></switch></g><path d="M 627.13 1795 L 647.2 1795 L 642.3 1795 L 655.91 1795" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 661.16 1795 L 654.16 1798.5 L 655.91 1795 L 654.16 1791.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="487.38" y="1765" width="139.75" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 1795px; margin-left: 488px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">验价失败，抛异常，本地事务回滚</div></div></div></foreignObject><text x="557" y="1799" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">验价失败，抛异常，本地事务回滚</text></switch></g><rect x="662.28" y="1765" width="139.75" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 138px; height: 1px; padding-top: 1795px; margin-left: 663px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单应付价格发生变化<br />重定向到订单确认页</div></div></div></foreignObject><text x="732" y="1799" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单应付价格发生变化&#xa;重定向到订单确认页</text></switch></g><path d="M 627.13 2050 L 665.79 2050" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 671.04 2050 L 664.04 2053.5 L 665.79 2050 L 664.04 2046.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="479.88" y="2020" width="147.25" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 145px; height: 1px; padding-top: 2050px; margin-left: 481px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">保存库存工作单<br />「wms_ware_order_task」<br />主要用来通过订单号<br />来查询映射的工作单id</div></div></div></foreignObject><text x="554" y="2054" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">保存库存工作单「wms_ware_order_task」...</text></switch></g><path d="M 547 1846 L 741.97 1846 L 741.97 1946 L 664.49 1946 L 644.49 1976 L 644.49 1946 L 547 1946 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 193px; height: 1px; padding-top: 1896px; margin-left: 548px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">因为可能出现订单回滚后，库存锁定不回滚的情况，但订单已经回滚，得不到库存锁定信息，因此要有库存工作单以及库存工作单详情，其中包括订单信息和锁定库存时的信息(仓库id，商品id，锁了几件...)</div></div></div></foreignObject><text x="644" y="1900" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">因为可能出现订单回滚后，库存锁定不回滚的情况，但订单已经回滚，得不到库存锁定信息，因此要有库存工作单以及库存工作单详情，其中包括订单信息和锁定库存时的信息(仓库id，商品id，锁了几件...)</text></switch></g><path d="M 1002 2220 L 1002 2243.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1002 2248.88 L 998.5 2241.88 L 1002 2243.63 L 1005.5 2241.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="907" y="2140" width="190" height="80" rx="12" ry="12" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 2180px; margin-left: 908px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">锁成功后，保存库存工作单详情<br />「wms_ware_order_task_detail」<br />保存skuId、商品数量、仓库id、工作单id、锁定状态</div></div></div></foreignObject><text x="1002" y="2184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">锁成功后，保存库存工作单详情「wms_ware_order_task_detail」...</text></switch></g><path d="M 732.16 2080 L 732.16 2113.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 732.16 2118.88 L 728.66 2111.88 L 732.16 2113.63 L 735.66 2111.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="672.16" y="2020" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2050px; margin-left: 673px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">对于每个订单项尝试锁库存</div></div></div></foreignObject><text x="732" y="2054" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">对于每个订单项尝试锁库存</text></switch></g><path d="M 1002 1980 L 1002 2013.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1002 2018.88 L 998.5 2011.88 L 1002 2013.63 L 1005.5 2011.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="933.25" y="1920" width="137.5" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 1950px; margin-left: 934px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">找到该商品sku最近的且有足够库存的仓库<br />「<span style="background-color: rgb(255 , 255 , 255) ; font-family: &quot;jetbrains mono&quot; , monospace ; font-size: 9.8pt">wms_ware_sku</span><span>」</span></div></div></div></foreignObject><text x="1002" y="1954" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">找到该商品sku最近的且有足够库存的仓库...</text></switch></g><path d="M 487 1980 L 777 1980 L 777 1980 L 787 1995 L 777 2010 L 777 2010 L 487 2010 L 497 1995 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1995px; margin-left: 637px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">库存服务</div></div></div></foreignObject><text x="637" y="1999" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存服务</text></switch></g><path d="M 1002 2090 L 1002 2133.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1002 2138.88 L 998.5 2131.88 L 1002 2133.63 L 1005.5 2131.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="908.25" y="2020" width="187.5" height="70" rx="10.5" ry="10.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 186px; height: 1px; padding-top: 2055px; margin-left: 909px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">真正锁库存<br />找到这个仓库的这个sku商品<br />给其stock_locked字段加上sku数量<br />「<span style="background-color: rgb(255 , 255 , 255) ; font-family: &quot;jetbrains mono&quot; , monospace ; font-size: 9.8pt">wms_ware_sku</span>」</div></div></div></foreignObject><text x="1002" y="2059" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">真正锁库存找到这个仓库的这个sku商品...</text></switch></g><path d="M 807 2034 L 857 2034 L 857 2025 L 877 2050 L 857 2075 L 857 2066 L 807 2066 L 807 2050 Z" fill="#d80073" stroke="#a50040" stroke-miterlimit="10" pointer-events="all"/><path d="M 1002 2310 L 1002 2344 L 1002.62 2371.63" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1002.74 2376.88 L 999.08 2369.96 L 1002.62 2371.63 L 1006.08 2369.81 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2344px; margin-left: 1002px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">stock.locked</div></div></div></foreignObject><text x="1002" y="2347" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">stock.locked</text></switch></g><rect x="942" y="2250" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2280px; margin-left: 943px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">发消息给订单交换机</div></div></div></foreignObject><text x="1002" y="2284" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">发消息给订单交换机</text></switch></g><path d="M 452 1640 L 592 1640 L 592 1640 L 602 1655 L 592 1670 L 592 1670 L 452 1670 L 462 1655 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 1655px; margin-left: 527px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">会员服务、优惠券服务</div></div></div></foreignObject><text x="527" y="1659" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">会员服务、优惠券服务</text></switch></g><path d="M 1047.76 2408 L 1137.8 2408 L 1137.8 2548 L 1124.13 2548" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1118.88 2548 L 1125.88 2544.5 L 1124.13 2548 L 1125.88 2551.5 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2442px; margin-left: 1137px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">stock.locked</div></div></div></foreignObject><text x="1137" y="2446" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">stock.locked</text></switch></g><path d="M 958.3 2429.48 L 838 2429.5 L 838 2628 L 891.39 2628" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 896.64 2628 L 889.64 2631.5 L 891.39 2628 L 889.64 2624.5 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2550px; margin-left: 839px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">stock.release.#</div></div></div></foreignObject><text x="839" y="2553" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">stock.release.#</text></switch></g><path d="M 957.76 2408 L 777 2408 L 777 2648 L 891.39 2648" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 896.64 2648 L 889.64 2651.5 L 891.39 2648 L 889.64 2644.5 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2515px; margin-left: 779px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.release.other.#</div></div></div></foreignObject><text x="779" y="2518" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.release.other.#</text></switch></g><path d="M 966.03 2378 L 1039.49 2378 C 1044.06 2378 1047.76 2391.43 1047.76 2408 C 1047.76 2424.57 1044.06 2438 1039.49 2438 L 966.03 2438 C 961.46 2438 957.76 2424.57 957.76 2408 C 957.76 2391.43 961.46 2378 966.03 2378 Z" fill="#008a00" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 1039.49 2378 C 1034.93 2378 1031.23 2391.43 1031.23 2408 C 1031.23 2424.57 1034.93 2438 1039.49 2438" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 2408px; margin-left: 959px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stock-<br />event-<br />exchange<br />Topic类型</div></div></div></foreignObject><text x="1003" y="2412" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">stock-...</text></switch></g><ellipse cx="892" cy="2348" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="892" cy="2348" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 2348px; margin-left: 847px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">库存工作单id<br />库存工作单详情</div></div></div></foreignObject><text x="892" y="2352" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存工作单id...</text></switch></g><path d="M 897.76 2548 L 877.8 2548 L 877.8 2483 L 1002.8 2483 L 1002.77 2444.37" fill="none" stroke="#b85450" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1002.76 2439.12 L 1006.27 2446.11 L 1002.77 2444.37 L 999.27 2446.12 Z" fill="#b85450" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2485px; margin-left: 935px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">stock.release</div></div></div></foreignObject><text x="935" y="2488" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">stock.release</text></switch></g><rect x="897.76" y="2528" width="220" height="40" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><rect x="899.76" y="2530" width="216" height="36" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 2548px; margin-left: 901px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stock.delay.queue<br />延时队列，50min后解锁库存</div></div></div></foreignObject><text x="1008" y="2552" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">stock.delay.queue...</text></switch></g><rect x="897.76" y="2618" width="220" height="40" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><rect x="899.76" y="2620" width="216" height="36" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 2638px; margin-left: 901px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">stock.release.stock.queue<br />库存解锁队列</div></div></div></foreignObject><text x="1008" y="2642" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">stock.release.stock.queue...</text></switch></g><path d="M 1007.76 2768 L 1007.8 2798 L 1192 2798 L 1192.01 2821.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.01 2826.88 L 1188.51 2819.88 L 1192.01 2821.63 L 1195.51 2819.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1007.76 2768 L 1007.8 2798 L 739.1 2798 L 739.12 2821.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 739.12 2826.88 L 735.61 2819.88 L 739.12 2821.63 L 742.61 2819.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="947.76" y="2708" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2738px; margin-left: 949px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">消费者<br />监听库存解锁队列<br />解锁库存</div></div></div></foreignObject><text x="1008" y="2742" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消费者监听库存解锁队列解锁库存...</text></switch></g><path d="M 992.76 2666.71 L 1010.47 2666.71 L 1010.47 2653 L 1022.76 2683 L 1010.47 2713 L 1010.47 2699.29 L 992.76 2699.29 Z" fill="#d80073" stroke="#a50040" stroke-miterlimit="10" transform="rotate(90,1007.76,2683)" pointer-events="all"/><path d="M 1192.01 2888 L 1192.01 2951.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.01 2956.88 L 1188.51 2949.88 L 1192.01 2951.63 L 1195.51 2949.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1132.01" y="2828" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2858px; margin-left: 1133px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">收到50min后自动解锁库存的消息</div></div></div></foreignObject><text x="1192" y="2862" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">收到50min后自动解锁库存的消息</text></switch></g><path d="M 739.12 2888 L 739.12 2978.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 739.12 2983.88 L 735.62 2976.88 L 739.12 2978.63 L 742.62 2976.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="679.12" y="2828" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2858px; margin-left: 680px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单关闭收到解锁库存的消息</div></div></div></foreignObject><text x="739" y="2862" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单关闭收到解锁库存的消息</text></switch></g><path d="M 1192.83 3520 L 1192.83 3541.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.83 3546.88 L 1189.33 3539.88 L 1192.83 3541.63 L 1196.33 3539.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1101.99" y="3440" width="181.68" height="80" rx="12" ry="12" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 180px; height: 1px; padding-top: 3480px; margin-left: 1103px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">对这个工作单详情进行库存解锁<br />1. 「wms_ware_sku」的stock_locked减去商品数量<br />2. 库存工作单详情的lock_status更新为已解锁</div></div></div></foreignObject><text x="1193" y="3484" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">对这个工作单详情进行库存解锁1. 「wms_ware_sku」的stock_locked减去商品数量...</text></switch></g><path d="M 1192.3 3398 L 1192.3 3419 L 1192.67 3433.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.8 3438.88 L 1189.13 3431.97 L 1192.67 3433.63 L 1196.12 3431.8 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1133.67 3353 L 1101.26 3353" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1096.01 3353 L 1103.01 3349.5 L 1101.26 3353 L 1103.01 3356.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1192.3 3308 L 1250.92 3353 L 1192.3 3398 L 1133.67 3353 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 115px; height: 1px; padding-top: 3353px; margin-left: 1135px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">没有订单或订单的状态为已关闭</div></div></div></foreignObject><text x="1192" y="3357" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">没有订单或订单的状态为已关闭</text></switch></g><ellipse cx="1132" cy="2928" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="1132" cy="2928" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 2928px; margin-left: 1087px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">库存工作单id<br />库存工作单详情</div></div></div></foreignObject><text x="1132" y="2932" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">库存工作单id...</text></switch></g><path d="M 997.82 3108 L 1087.82 3108 L 1087.82 3108 L 1097.82 3123 L 1087.82 3138 L 1087.82 3138 L 997.82 3138 L 1007.82 3123 Z" fill="#dae8fc" stroke="#6c8ebf" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3123px; margin-left: 1048px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务</div></div></div></foreignObject><text x="1048" y="3127" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务</text></switch></g><path d="M 1192.82 3158 L 1192.8 3178 L 1192.45 3191.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.32 3196.88 L 1189 3189.8 L 1192.45 3191.63 L 1196 3189.97 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="1107.89" y="3088" width="169.87" height="70" rx="10.5" ry="10.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 168px; height: 1px; padding-top: 3123px; margin-left: 1109px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">查询工作单id对应的订单号<br />「wms_ware_order」<br />根据订单号来获取订单的状态</div></div></div></foreignObject><text x="1193" y="3127" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">查询工作单id对应的订单号...</text></switch></g><path d="M 1105.76 3003 L 1050.62 3003" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1045.37 3003 L 1052.37 2999.5 L 1050.62 3003 L 1052.37 3006.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3004px; margin-left: 1077px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="1077" y="3007" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 1192.01 3048 L 1192 3068 L 1192.56 3081.64" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.78 3086.88 L 1188.99 3080.03 L 1192.56 3081.64 L 1195.99 3079.74 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3065px; margin-left: 1194px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="1194" y="3068" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 1192.01 2958 L 1278.26 3003 L 1192.01 3048 L 1105.76 3003 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 171px; height: 1px; padding-top: 3003px; margin-left: 1107px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>查询这个工作单详情是否还存在且其最新锁定情况是否为锁定状态</span><br /><span>「wms_ware_order_task_detail」<br /></span></div></div></div></foreignObject><text x="1192" y="3007" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">查询这个工作单详情是否还存在且其最新锁定情况是否为锁定状态「wms_ware_order_task_detail」...</text></switch></g><rect x="887" y="2940.5" width="157.25" height="125" rx="18.75" ry="18.75" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 155px; height: 1px; padding-top: 3003px; margin-left: 888px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">（1）没有库存工作单详情，说明当时远程库存服务锁库存没有事务提交<br />（2）工作单详情不是锁定状态，订单取消后已经率先一步解锁库存了，所以就是无需解锁</div></div></div></foreignObject><text x="966" y="3007" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">（1）没有库存工作单详情，说明当时远程库存服务锁库存没有事务提交...</text></switch></g><path d="M 1152.29 3238 L 1097.63 3238" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1092.38 3238 L 1099.38 3234.5 L 1097.63 3238 L 1099.38 3241.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1192.29 3278 L 1192.29 3301.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1192.29 3306.88 L 1188.79 3299.88 L 1192.29 3301.63 L 1195.79 3299.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 1192.29 3198 L 1232.29 3238 L 1192.29 3278 L 1152.29 3238 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 78px; height: 1px; padding-top: 3238px; margin-left: 1153px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>查询是否成功</span></div></div></div></foreignObject><text x="1192" y="3242" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">查询是否成功</text></switch></g><rect x="971.26" y="3208" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3238px; margin-left: 972px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">抛异常，拒绝收到的消息，重新放回库存解锁队列</div></div></div></foreignObject><text x="1031" y="3242" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">抛异常，拒绝收到的消息，重新放回库存解锁队列</text></switch></g><rect x="974.89" y="3323" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3353px; margin-left: 976px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单还在，且不是关闭状态，那么就不需要解锁库存</div></div></div></foreignObject><text x="1035" y="3357" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单还在，且不是关闭状态，那么就不需要解锁库存</text></switch></g><rect x="1132.83" y="3548" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3578px; margin-left: 1134px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">给库存解锁队列返回消息确认ack</div></div></div></foreignObject><text x="1193" y="3582" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">给库存解锁队列返回消息确认ack</text></switch></g><path d="M 1264.51 3300 L 1529.51 3300 L 1529.51 3418 L 1324.26 3418 L 1293.66 3440 L 1304.26 3418 L 1264.51 3418 Z" fill="#ffff88" stroke="#36393d" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 263px; height: 1px; padding-top: 3359px; margin-left: 1266px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">（1）没有订单：在订单服务提交订单时，成功远程锁定库存后的其他逻辑抛异常，导致订单服务本地事务回滚了，保存在数据库的订单也回滚了，需要解锁库存<br />（2）订单的状态为已关闭，说明订单已经关闭，需要解锁库存</div></div></div></foreignObject><text x="1397" y="3363" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">（1）没有订单：在订单服务提交订单时，成功远程锁定库存后的其他逻辑抛异常，导致订单服务本地事务回滚了，保存在数据库的订单也回滚了，需要解锁库存...</text></switch></g><rect x="672.16" y="2120" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2150px; margin-left: 673px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>如果有任何一个订单项没有锁定成功，回滚当前库存事务</span></div></div></div></foreignObject><text x="732" y="2154" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果有任何一个订单项没有锁定成功，回滚当前库存事务</text></switch></g><path d="M 299.12 2160 L 238.37 2160" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 233.12 2160 L 240.12 2156.5 L 238.37 2160 L 240.12 2163.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2163px; margin-left: 268px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="268" y="2166" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 348.49 2200 L 348.49 2243.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.49 2248.88 L 344.99 2241.88 L 348.49 2243.63 L 351.99 2241.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2225px; margin-left: 348px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="348" y="2228" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 348.49 2120 L 397.87 2160 L 348.49 2200 L 299.12 2160 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 97px; height: 1px; padding-top: 2160px; margin-left: 300px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">锁库存是否成功</div></div></div></foreignObject><text x="348" y="2164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">锁库存是否成功</text></switch></g><rect x="112" y="2130" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2160px; margin-left: 113px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">抛异常，事务回滚<br />库存不足</div></div></div></foreignObject><text x="172" y="2164" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">抛异常，事务回滚&#xa;库存不足</text></switch></g><path d="M 348.49 2310 L 348.5 2330 L 348.33 2343.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.26 2348.88 L 344.85 2341.84 L 348.33 2343.63 L 351.85 2341.93 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.49" y="2250" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2280px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单创建成功</div></div></div></foreignObject><text x="348" y="2284" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单创建成功</text></switch></g><path d="M 348.25 2410 L 348.25 2461.63" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.25 2466.88 L 344.75 2459.88 L 348.25 2461.63 L 351.75 2459.88 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2435px; margin-left: 350px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.create.order</div></div></div></foreignObject><text x="350" y="2438" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.create.order</text></switch></g><path d="M 288.49 2280 L 7 2280 L 7 3600 L 226.63 3600" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 231.88 3600 L 224.88 3603.5 L 226.63 3600 L 224.88 3596.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.25" y="2350" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2380px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">发消息给订单交换机</div></div></div></foreignObject><text x="348" y="2384" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">发消息给订单交换机</text></switch></g><ellipse cx="453.14" cy="2438" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="453.14" cy="2438" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 2438px; margin-left: 408px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单</div></div></div></foreignObject><text x="453" y="2442" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单</text></switch></g><path d="M 393.25 2498 L 479.8 2498 L 479.8 2598 L 466.12 2598" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 460.87 2598 L 467.87 2594.5 L 466.12 2598 L 467.87 2601.5 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2549px; margin-left: 480px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.create.order</div></div></div></foreignObject><text x="480" y="2552" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.create.order</text></switch></g><path d="M 303.25 2498 L 167 2498 L 167 2678 L 238 2678 L 233.38 2678" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 238.63 2678 L 231.63 2681.5 L 233.38 2678 L 231.63 2674.5 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2603px; margin-left: 166px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.release.order</div></div></div></foreignObject><text x="166" y="2607" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.release.order</text></switch></g><path d="M 311.52 2468 L 384.98 2468 C 389.55 2468 393.25 2481.43 393.25 2498 C 393.25 2514.57 389.55 2528 384.98 2528 L 311.52 2528 C 306.95 2528 303.25 2514.57 303.25 2498 C 303.25 2481.43 306.95 2468 311.52 2468 Z" fill="#008a00" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><path d="M 384.98 2468 C 380.42 2468 376.72 2481.43 376.72 2498 C 376.72 2514.57 380.42 2528 384.98 2528" fill="none" stroke="#005700" stroke-width="2" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 88px; height: 1px; padding-top: 2498px; margin-left: 304px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">order-<br />event-<br />exchange<br />Topic类型</div></div></div></foreignObject><text x="348" y="2502" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">order-...</text></switch></g><path d="M 239.75 2598 L 219.8 2598 L 219.8 2553 L 348.3 2553 L 348.26 2534.37" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.25 2529.12 L 351.77 2536.11 L 348.26 2534.37 L 344.77 2536.12 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2553px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.release.order</div></div></div></foreignObject><text x="281" y="2556" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.release.order</text></switch></g><rect x="239.75" y="2578" width="220" height="40" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><rect x="241.75" y="2580" width="216" height="36" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 2598px; margin-left: 243px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">order.delay.queue<br />延时队列，30min后开始关闭订单</div></div></div></foreignObject><text x="350" y="2602" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">order.delay.queue...</text></switch></g><rect x="239.75" y="2658" width="220" height="40" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><rect x="241.75" y="2660" width="216" height="36" fill="#1ba1e2" stroke="#006eaf" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 214px; height: 1px; padding-top: 2678px; margin-left: 243px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #ffffff; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">order.release.order.queue<br />订单释放队列</div></div></div></foreignObject><text x="350" y="2682" fill="#ffffff" font-family="Helvetica" font-size="12px" text-anchor="middle">order.release.order.queue...</text></switch></g><path d="M 333.25 2706.71 L 350.96 2706.71 L 350.96 2693 L 363.25 2723 L 350.96 2753 L 350.96 2739.29 L 333.25 2739.29 Z" fill="#d80073" stroke="#a50040" stroke-miterlimit="10" transform="rotate(90,348.25,2723)" pointer-events="all"/><path d="M 348.49 2810 L 348.5 2830 L 348.33 2843.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.27 2848.88 L 344.85 2841.84 L 348.33 2843.63 L 351.85 2841.93 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.49" y="2750" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2780px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">消费者<br />监听订单释放队列<br />准备关闭过期订单</div></div></div></foreignObject><text x="348" y="2784" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">消费者监听订单释放队列准备关闭过期订单...</text></switch></g><path d="M 268.88 2890 L 213.37 2890" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 208.12 2890 L 215.12 2886.5 L 213.37 2890 L 215.12 2893.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2890px; margin-left: 238px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">否</div></div></div></foreignObject><text x="238" y="2893" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">否</text></switch></g><path d="M 348.26 2930 L 348.25 2966.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.25 2971.88 L 344.75 2964.88 L 348.25 2966.63 L 351.75 2964.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2952px; margin-left: 348px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">是</div></div></div></foreignObject><text x="348" y="2955" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">是</text></switch></g><path d="M 348.26 2850 L 427.63 2890 L 348.26 2930 L 268.88 2890 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 157px; height: 1px; padding-top: 2890px; margin-left: 270px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">查询该订单的最新状态是不是还是新建待付款？</div></div></div></foreignObject><text x="348" y="2894" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">查询该订单的最新状态是不是还是新建待付款？</text></switch></g><ellipse cx="437.38" cy="2840" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="437.38" cy="2840" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 2840px; margin-left: 392px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单</div></div></div></foreignObject><text x="437" y="2844" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单</text></switch></g><rect x="87" y="2860" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 2890px; margin-left: 88px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">无需关订单<br />消息确认ack</div></div></div></foreignObject><text x="147" y="2894" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">无需关订单&#xa;消息确认ack</text></switch></g><path d="M 348.25 3033 L 348.45 3063.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.48 3068.88 L 344.94 3061.9 L 348.45 3063.63 L 351.94 3061.86 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.25" y="2973" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3003px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">更新订单的状态为已取消<br />「oms_order」</div></div></div></foreignObject><text x="348" y="3007" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">更新订单的状态为已取消&#xa;「oms_order」</text></switch></g><path d="M 408.49 3100 L 547 3100 L 547 2392.9 L 950.94 2392.88" fill="none" stroke="#82b366" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 956.19 2392.88 L 949.19 2396.38 L 950.94 2392.88 L 949.19 2389.38 Z" fill="#82b366" stroke="#82b366" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 2668px; margin-left: 548px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">order.release.other</div></div></div></foreignObject><text x="548" y="2671" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">order.release.other</text></switch></g><path d="M 348.49 3130 L 348.49 3163.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.49 3168.88 L 344.99 3161.88 L 348.49 3163.63 L 351.99 3161.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="288.49" y="3070" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3100px; margin-left: 289px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">发消息给库存交换机<br />准备解锁库存</div></div></div></foreignObject><text x="348" y="3104" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">发消息给库存交换机&#xa;准备解锁库存</text></switch></g><ellipse cx="459.75" cy="3058" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="459.75" cy="3058" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 3058px; margin-left: 415px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单</div></div></div></foreignObject><text x="460" y="3062" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单</text></switch></g><ellipse cx="659.37" cy="2928" rx="50" ry="30" fill="#e1d5e7" stroke="#9673a6" pointer-events="all"/><ellipse cx="659.37" cy="2928" rx="46" ry="26" fill="none" stroke="#9673a6" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 90px; height: 1px; padding-top: 2928px; margin-left: 614px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单</div></div></div></foreignObject><text x="659" y="2932" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单</text></switch></g><path d="M 348.49 3250 L 348.49 3283.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 348.49 3288.88 L 344.99 3281.88 L 348.49 3283.63 L 351.99 3281.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 348.49 3170 L 403.3 3210 L 348.49 3250 L 293.68 3210 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 108px; height: 1px; padding-top: 3210px; margin-left: 295px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">解锁库存的消息是否成功发送</div></div></div></foreignObject><text x="348" y="3214" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">解锁库存的消息是否成功发送</text></switch></g><path d="M 739.12 3070 L 739.12 3123.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 739.12 3128.88 L 735.62 3121.88 L 739.12 3123.63 L 742.62 3121.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="638.21" y="2985" width="201.82" height="85" rx="12.75" ry="12.75" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 200px; height: 1px; padding-top: 3028px; margin-left: 639px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">根据订单号查一下和这个订单相关联的、待解锁的库存工作单详情，防止重复解锁库存<br />「wms_ware_order」<br />「wms_ware_order_task_detail」</div></div></div></foreignObject><text x="739" y="3031" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">根据订单号查一下和这个订单相关联的、待解锁的库存工作单详情，防止重复解锁库存「wms_ware_order」...</text></switch></g><path d="M 681.7 3170 L 633.5 3170" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 628.25 3170 L 635.25 3166.5 L 633.5 3170 L 635.25 3173.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3170px; margin-left: 655px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 11px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; background-color: #ffffff; white-space: nowrap; ">无</div></div></div></foreignObject><text x="655" y="3173" fill="#000000" font-family="Helvetica" font-size="11px" text-anchor="middle">无</text></switch></g><path d="M 739.12 3210 L 739.1 3480 L 1095.62 3480" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 1100.87 3480 L 1093.87 3483.5 L 1095.62 3480 L 1093.87 3476.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 739.12 3130 L 796.54 3170 L 739.12 3210 L 681.7 3170 Z" fill="#f8cecc" stroke="#b85450" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 113px; height: 1px; padding-top: 3170px; margin-left: 683px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">如果有这样的库存工作单详情</div></div></div></foreignObject><text x="739" y="3174" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">如果有这样的库存工作单详情</text></switch></g><rect x="507.13" y="3140" width="120" height="60" rx="9" ry="9" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3170px; margin-left: 508px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>没有库存需要解锁<br />消息确认ack</span></div></div></div></foreignObject><text x="567" y="3174" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">没有库存需要解锁&#xa;消息确认ack</text></switch></g><path d="M 65.99 2990 L 275.74 2990 L 275.74 3078 L 262.2 3078 L 275.74 3108 L 221.2 3078 L 65.99 3078 Z" fill="#fff2cc" stroke="#d6b656" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 3034px; margin-left: 67px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">发这一消息的原因<br />防止订单服务卡顿，导致订单状态消息一直改不了，库存消息50min后优先到期。查订单状态新建状态，什么都不做就走，导致卡顿的订单，永远不能解锁库存</div></div></div></foreignObject><text x="171" y="3038" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">发这一消息的原因&#xa;防止订单服务卡顿，导致订单状态消息一直改不了，库存消息50min后优先到期。查订单状态新建状态，什么都不做就走，导致卡顿的订单，永远不能解锁库存</text></switch></g><rect x="279.74" y="3290" width="137.51" height="70" rx="10.5" ry="10.5" fill="#ffff88" stroke="#36393d" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 136px; height: 1px; padding-top: 3325px; margin-left: 281px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">失败的消息存在数据库<br />定期扫描数据库将失败的消息进行重新发送</div></div></div></foreignObject><text x="348" y="3329" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">失败的消息存在数据库&#xa;定期扫描数据库将失败的消息进行重新发送</text></switch></g><path d="M 293 3630 L 293 3650 L 293.27 3663.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 293.38 3668.88 L 289.74 3661.95 L 293.27 3663.63 L 296.74 3661.81 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="233" y="3570" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3600px; margin-left: 234px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单提交成功<br />来到支付选择页</div></div></div></foreignObject><text x="293" y="3604" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单提交成功&#xa;来到支付选择页</text></switch></g><path d="M 293.37 3730 L 293.4 3750 L 293.21 3763.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 293.14 3768.88 L 289.73 3761.83 L 293.21 3763.63 L 296.73 3761.93 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="233.37" y="3670" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 3700px; margin-left: 234px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">点击「支付宝」支付<br />/order/payOrder<br />带上参数是订单号orderSn</div></div></div></foreignObject><text x="293" y="3704" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">点击「支付宝」支付/order/payOrder...</text></switch></g><path d="M 293.12 3840 L 293.1 3860 L 292.86 3873.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 292.76 3878.88 L 289.39 3871.82 L 292.86 3873.63 L 296.39 3871.95 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><path d="M 356.87 3805 L 413.25 3805" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 418.5 3805 L 411.5 3808.5 L 413.25 3805 L 411.5 3801.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="229.37" y="3770" width="127.5" height="70" rx="10.5" ry="10.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 126px; height: 1px; padding-top: 3805px; margin-left: 230px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">构造要给alipayTemplate的参数<br /></div></div></div></foreignObject><text x="293" y="3809" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">构造要给alipayTemplate的参数&#xa;</text></switch></g><rect x="419.62" y="3767.5" width="189.75" height="75" rx="11.25" ry="11.25" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 188px; height: 1px; padding-top: 3805px; margin-left: 421px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; "><span>商户订单号：out_trade_no</span><br /><span>订单名称：subject</span><br /><span>付款金额：total_amount</span><br /><span>body：商品描述</span></div></div></div></foreignObject><text x="514" y="3809" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">商户订单号：out_trade_no...</text></switch></g><path d="M 467.12 3730 L 557.12 3730 L 557.12 3730 L 567.12 3745 L 557.12 3760 L 557.12 3760 L 467.12 3760 L 477.12 3745 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3745px; margin-left: 517px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务</div></div></div></foreignObject><text x="517" y="3749" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务</text></switch></g><path d="M 292.74 4000 L 292.7 4025 L 293.22 4043.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 293.37 4048.88 L 289.67 4041.98 L 293.22 4043.63 L 296.67 4041.79 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="180.87" y="3880" width="223.75" height="120" rx="18" ry="18" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 222px; height: 1px; padding-top: 3940px; margin-left: 182px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">调用alipayTemplate的pay方法<br /><br />根据预先的配置（应用id、商户私钥、支付宝公钥、成功同步通知路径、异步通知路径、签名方式、编码方式）<br /><br />生成一个支付宝客户端</div></div></div></foreignObject><text x="293" y="3944" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">调用alipayTemplate的pay方法...</text></switch></g><path d="M 293.37 4110 L 293.37 4143.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 293.37 4148.88 L 289.87 4141.88 L 293.37 4143.63 L 296.87 4141.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="233.37" y="4050" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 4080px; margin-left: 234px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">创建支付请求，发送</div></div></div></foreignObject><text x="293" y="4084" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">创建支付请求，发送</text></switch></g><path d="M 293.37 4240 L 293.37 4273.63" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 293.37 4278.88 L 289.87 4271.88 L 293.37 4273.63 L 296.87 4271.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="188.37" y="4150" width="210" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 208px; height: 1px; padding-top: 4195px; margin-left: 189px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">支付宝的响应，响应的是一个页面（text/html），只要浏览器显示这个页面，就会自动来到支付宝的收银台页面</div></div></div></foreignObject><text x="293" y="4199" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">支付宝的响应，响应的是一个页面（text/html），只要浏览器显示这个页面，就会自动来到支付宝的收银台页面</text></switch></g><path d="M 353.37 4310 L 420.5 4310" fill="none" stroke="#000000" stroke-miterlimit="10" pointer-events="stroke"/><path d="M 425.75 4310 L 418.75 4313.5 L 420.5 4310 L 418.75 4306.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><rect x="233.37" y="4280" width="120" height="60" rx="9" ry="9" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 118px; height: 1px; padding-top: 4310px; margin-left: 234px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">支付成功后，根据预先配置的同步通知地址来到订单列表页</div></div></div></foreignObject><text x="293" y="4314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">支付成功后，根据预先配置的同步通知地址来到订单列表页</text></switch></g><rect x="426.87" y="4265" width="155" height="90" rx="13.5" ry="13.5" fill="#ffffff" stroke="#000000" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 153px; height: 1px; padding-top: 4310px; margin-left: 428px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: normal; word-wrap: normal; ">订单列表页会根据登陆用户id来分页查询其关联的所有订单，并且每个订单里都封装所属的所有订单项</div></div></div></foreignObject><text x="504" y="4314" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单列表页会根据登陆用户id来分页查询其关联的所有订单，并且每个订单里都封装所属的所有订单项</text></switch></g><path d="M 452 4230 L 542 4230 L 542 4230 L 552 4245 L 542 4260 L 542 4260 L 452 4260 L 462 4245 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 4245px; margin-left: 502px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务</div></div></div></foreignObject><text x="502" y="4249" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务</text></switch></g><path d="M 243.37 3530 L 333.37 3530 L 333.37 3530 L 343.37 3545 L 333.37 3560 L 333.37 3560 L 243.37 3560 L 253.37 3545 Z" fill="#ffffff" stroke="#000000" stroke-miterlimit="10" pointer-events="all"/><g transform="translate(-0.5 -0.5)"><switch><foreignObject style="overflow: visible; text-align: left;" pointer-events="none" width="100%" height="100%" requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"><div xmlns="http://www.w3.org/1999/xhtml" style="display: flex; align-items: unsafe center; justify-content: unsafe center; width: 1px; height: 1px; padding-top: 3545px; margin-left: 293px;"><div style="box-sizing: border-box; font-size: 0; text-align: center; "><div style="display: inline-block; font-size: 12px; font-family: Helvetica; color: #000000; line-height: 1.2; pointer-events: all; white-space: nowrap; ">订单服务</div></div></div></foreignObject><text x="293" y="3549" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">订单服务</text></switch></g></g><switch><g requiredFeatures="http://www.w3.org/TR/SVG11/feature#Extensibility"/><a transform="translate(0,-5)" xlink:href="https://www.diagrams.net/doc/faq/svg-export-text-problems" target="_blank"><text text-anchor="middle" font-size="10px" x="50%" y="100%">Viewer does not support full SVG 1.1</text></a></switch></svg>